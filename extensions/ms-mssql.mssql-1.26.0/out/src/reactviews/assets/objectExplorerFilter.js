import{$a as h,Ab as ne,Ba as I,Bb as ae,Da as A,Db as se,Eb as oe,Fa as F,Jb as n,Kb as le,Lb as ie,Na as L,Oa as Q,T as K,Za as J,_a as X,ab as Y,bb as z,c as p,cb as Z,d as V,db as ee,eb as te,fb as re,g as Se,h as G,k as U,r as E,wa as $,xa as v}from"./chunk-PUWFO3BD.js";var me=p(Se());var ce=p(V());var de=p(E()),M=(0,ce.createContext)(void 0),ue=({children:c})=>{let i=ie(),f=i?.state;return(0,de.jsx)(M.Provider,{value:{isLocalizationLoaded:i?.localization,state:f,themeKind:i?.themeKind,submit:function(T){i?.extensionRpc.action("submit",{filters:T})},clearAllFilters:function(){},cancel:function(){i?.extensionRpc.action("cancel",{})}},children:c})};var m=p(V());var r=p(E()),je=U({root:{flexDirection:"column",display:"flex",paddingTop:"10px",paddingLeft:"10px","> *":{marginTop:"5px",marginBottom:"5px"}},inputs:{maxWidth:"150px",minWidth:"150px",width:"150px"},tableCell:{display:"flex",flexDirection:"column","> *":{marginTop:"5px",marginBottom:"5px"}},operatorOptions:{maxWidth:"150px",minWidth:"150px",width:"150px"},andOrText:{marginLeft:"10px"}}),pe=()=>{let c=je(),i=(0,m.useContext)(M),[f,T]=(0,m.useState)(void 0),[a,x]=(0,m.useState)([]),xe=n.objectExplorerFiltering.and,N=n.objectExplorerFiltering.contains,w=n.objectExplorerFiltering.notContains,B=n.objectExplorerFiltering.startsWith,q=n.objectExplorerFiltering.notStartsWith,P=n.objectExplorerFiltering.endsWith,_=n.objectExplorerFiltering.notEndsWith,b=n.objectExplorerFiltering.equals,g=n.objectExplorerFiltering.notEquals,C=n.objectExplorerFiltering.lessThan,O=n.objectExplorerFiltering.lessThanOrEquals,S=n.objectExplorerFiltering.greaterThan,j=n.objectExplorerFiltering.greaterThanOrEquals,u=n.objectExplorerFiltering.between,d=n.objectExplorerFiltering.notBetween;function y(s){if(s!==void 0)switch(s){case 8:return N;case 9:return w;case 10:return B;case 11:return q;case 12:return P;case 13:return _;case 0:return b;case 1:return g;case 2:return C;case 3:return O;case 4:return S;case 5:return j;case 6:return u;case 7:return d;default:return""}}function be(s){switch(s){case N:return 8;case w:return 9;case B:return 10;case q:return 11;case P:return 12;case _:return 13;case b:return 0;case g:return 1;case C:return 2;case O:return 3;case S:return 4;case j:return 5;case u:return 6;case d:return 7;default:return 0}}function H(s){switch(s.type){case 2:return[b,g];case 0:return[N,w,B,q,P,_,b,g];case 1:return[b,g,C,O,S,j,u,d];case 3:return[b,g,C,O,S,j,u,d];case 4:return[b,g];default:return[]}}function ge(s){switch(s.type){case 4:return s.choices.map(t=>({name:t.value,displayName:t.displayName}));case 2:return[{name:"true",displayName:"True"},{name:"false",displayName:"False"}];default:return}}(0,m.useEffect)(()=>{function s(){let e=document.getElementById("input-0");e&&e.focus()}let t=()=>{x(i?.state?.filterProperties?.map((e,o)=>{let l=i?.state?.existingFilters?.find(Oe=>Oe.name===e.name);return{index:o,name:e.name,displayName:e.displayName,value:l?.value??"",type:e.type,choices:ge(e)??[],operatorOptions:H(e),selectedOperator:l===void 0?H(e)[0]:y(l?.operator)??"",description:e.description}})??[])};s(),t(),T(void 0)},[i?.state?.filterProperties]);function Ee(s,t){switch(s){case"property":return(0,r.jsx)(oe,{size:"small",info:(0,r.jsx)(r.Fragment,{children:t.description}),children:t.displayName});case"operator":return(0,r.jsxs)("div",{className:c.tableCell,children:[(0,r.jsx)(A,{id:`operator-${t.index}`,className:c.operatorOptions,size:"small",value:t.selectedOperator??"",selectedOptions:[t.selectedOperator],onOptionSelect:(e,o)=>{a[t.index].selectedOperator=o.optionValue,o.optionValue===u||o.optionValue===d?Array.isArray(a[t.index].value)||(a[t.index].value=[a[t.index].value,""]):Array.isArray(a[t.index].value)&&(a[t.index].value=a[t.index].value[0]),x([...a])},children:t.operatorOptions.map(e=>(0,r.jsx)(I,{value:e,children:e},e))}),t.selectedOperator===u||t.selectedOperator===d&&(0,r.jsx)(L,{className:c.andOrText,size:200,children:xe})]});case"value":switch(t.type){case 3:case 1:case 0:let e="text";switch(t.type){case 3:e="date";break;case 1:e="number";break;case 0:e="text";break}return t.selectedOperator===u||t.selectedOperator===d?(0,r.jsxs)("div",{className:c.tableCell,children:[(0,r.jsx)(F,{id:`input-${t.index}`,size:"small",type:e,className:c.inputs,value:t.value[0],onChange:(o,l)=>{a[t.index].value[0]=l.value,x([...a])}}),(0,r.jsx)(F,{size:"small",type:e,className:c.inputs,value:t.value[1],onChange:(o,l)=>{a[t.index].value[1]=l.value,x([...a])}})]}):(0,r.jsx)(F,{id:`input-${t.index}`,size:"small",type:e,className:c.inputs,value:t.value,onChange:(o,l)=>{a[t.index].value=l.value,x([...a])}});case 4:case 2:return(0,r.jsx)(A,{size:"small",id:`input-${t.index}`,className:c.inputs,value:t.value,onOptionSelect:(o,l)=>{a[t.index].value=l.optionText??"",x([...a])},children:t.choices.map(o=>(0,r.jsx)(I,{value:o.name,children:o.displayName},o.name))});default:return}case"clear":return(0,r.jsx)($,{content:"Clear",relationship:"label",children:(0,r.jsx)(v,{size:"small",icon:(0,r.jsx)(K,{}),onClick:()=>{a[t.index].selectedOperator===u||a[t.index].selectedOperator===d?a[t.index].value=["",""]:a[t.index].value="",x([...a])}})})}}let k=[h({columnId:"property",renderHeaderCell:()=>(0,r.jsx)(r.Fragment,{children:n.objectExplorerFiltering.property})}),h({columnId:"operator",renderHeaderCell:()=>(0,r.jsx)(r.Fragment,{children:n.objectExplorerFiltering.operator})}),h({columnId:"value",renderHeaderCell:()=>(0,r.jsx)(r.Fragment,{children:n.objectExplorerFiltering.value})}),h({columnId:"clear",renderHeaderCell:()=>(0,r.jsx)(r.Fragment,{children:n.objectExplorerFiltering.clear})})],[D]=(0,m.useState)(k),fe={property:{minWidth:150,idealWidth:200,defaultWidth:300},operator:{minWidth:140,idealWidth:140,defaultWidth:140},value:{minWidth:150,idealWidth:150,defaultWidth:150},clear:{minWidth:20,idealWidth:20,defaultWidth:20}},[ve]=(0,m.useState)(fe),{getRows:he,columnSizing_unstable:R,tableRef:Te}=X({columns:D,items:a},[J({columnSizingOptions:ve})]),Ce=he();if(i)return(0,r.jsxs)("div",{className:c.root,children:[(0,r.jsx)(L,{size:400,children:G("Filter Settings")}),(0,r.jsx)(Q,{children:n.objectExplorerFiltering.path(i?.state?.nodePath)}),f&&f!==""&&(0,r.jsx)(ne,{intent:"error",children:(0,r.jsxs)(se,{children:[(0,r.jsx)(ae,{children:n.objectExplorerFiltering.error}),f]})}),(0,r.jsxs)(ee,{as:"table",size:"small",...R.getTableProps(),ref:Te,children:[(0,r.jsx)(te,{children:(0,r.jsx)(z,{children:D.map(s=>(0,r.jsx)(re,{...R.getTableHeaderCellProps(s.columnId),children:s.renderHeaderCell()},s.columnId))})}),(0,r.jsx)(Z,{children:Ce.map((s,t)=>(0,r.jsx)(z,{children:k.map(e=>(0,r.jsx)(Y,{...R.getTableHeaderCellProps(e.columnId),children:Ee(e.columnId,a[t])},e.columnId))},`row${t}`))})]}),(0,r.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",marginTop:"10px",maxWidth:"300px"},children:[(0,r.jsx)(v,{appearance:"secondary",onClick:()=>{for(let s of a)s.selectedOperator===u||s.selectedOperator===d?s.value=["",""]:s.value="";x([...a])},children:n.objectExplorerFiltering.clearAll}),(0,r.jsx)(v,{appearance:"secondary",onClick:()=>{i.cancel()},children:n.objectExplorerFiltering.close}),(0,r.jsx)(v,{appearance:"primary",onClick:()=>{let s=a.map(e=>{let o;switch(e.type){case 2:e.value===""||e.value===void 0?o=void 0:o=e.choices?.find(l=>l.displayName===e.value)?.name??void 0;break;case 1:e.selectedOperator===u||e.selectedOperator===d?o=e.value.map(l=>Number(l)):o=Number(e.value);break;case 0:case 3:o=e.value;break;case 4:e.value===""||e.value===void 0?o=void 0:o=e.choices?.find(l=>l.displayName===e.value)?.name??void 0;break}return{name:e.name,value:o,operator:be(e.selectedOperator)}}).filter(e=>e.operator===6||e.operator===7?e.value[0]!==""||e.value[1]!=="":e.value!==""&&e.value!==void 0),t="";for(let e of s)if(e.operator===6||e.operator===7){let o=e.value[0],l=e.value[1];!o&&l?t=n.objectExplorerFiltering.firstValueEmptyError(y(e.operator),e.name):!l&&o?t=n.objectExplorerFiltering.secondValueEmptyError(y(e.operator),e.name):o>l&&(t=n.objectExplorerFiltering.firstValueLessThanSecondError(y(e.operator),e.name))}if(t){T(t);return}i.submit(s)},children:n.objectExplorerFiltering.ok})]})]})};var W=p(E());me.default.createRoot(document.getElementById("root")).render((0,W.jsx)(le,{children:(0,W.jsx)(ue,{children:(0,W.jsx)(pe,{})})}));
